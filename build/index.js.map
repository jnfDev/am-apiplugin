{"version":3,"file":"index.js","mappings":"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","sources":["webpack://am-apiplugin/./src/components/Block/Block.js","webpack://am-apiplugin/./src/components/ColumnsVisibility/ColumnsVisibility.js","webpack://am-apiplugin/./src/components/Error/Error.js","webpack://am-apiplugin/./src/components/Loading/Loading.js","webpack://am-apiplugin/./src/components/Table/Table.js","webpack://am-apiplugin/./src/components/Table/Table.scss","webpack://am-apiplugin/external window [\"wp\",\"blockEditor\"]","webpack://am-apiplugin/external window [\"wp\",\"blocks\"]","webpack://am-apiplugin/external window [\"wp\",\"components\"]","webpack://am-apiplugin/external window [\"wp\",\"element\"]","webpack://am-apiplugin/webpack/bootstrap","webpack://am-apiplugin/webpack/runtime/compat get default export","webpack://am-apiplugin/webpack/runtime/define property getters","webpack://am-apiplugin/webpack/runtime/hasOwnProperty shorthand","webpack://am-apiplugin/webpack/runtime/make namespace object","webpack://am-apiplugin/./src/index.js"],"sourcesContent":["import {InspectorControls } from '@wordpress/block-editor';\nimport { ColumnsVisibility } from '../ColumnsVisibility/ColumnsVisibility';\nimport { Table }   from '../Table/Table';\nimport { Error }   from '../Error/Error';\nimport { Loading } from '../Loading/Loading';\n\nexport const Block = ({ attributes, setAttributes }) => {\n    const { adminVars, error, data, hiddenColumns } = attributes;\n\n    const setHiddenColumns = (hiddenColumns) => {\n        setAttributes({ hiddenColumns });\n    }\n\n    const renderBlock = () => {\n        if (!!error) {\n            return <Error error={error} />\n        }\n        \n        if (!!data) {\n            return (\n                <>\n                    <InspectorControls key=\"setting\">\n                        <ColumnsVisibility\n                            columns={data?.data?.headers}\n                            hiddenColumns={hiddenColumns} \n                            setHiddenColumns={setHiddenColumns} \n                        />\n                    </InspectorControls> \n                    <Table data={data} hiddenColumns={hiddenColumns} />\n                </>\n            )\n        }\n    \n        return <Loading />\n    };\n\n    if (!data) {\n        // TODO: useEffect\n        jQuery.post(\n            adminVars.url,\n            {\n                action: adminVars.action,\n                wpnonce: adminVars.nonce,\n            },\n            ({ data, success }) => {\n                if (!success) {\n                    return setAttributes({ error: data.errorMessage });\n                }\n\n                setAttributes({ data });\n            }\n        );\n    }\n\n    return (\n        <div>\n            {renderBlock()}\n        </div>\n    );\n}","import { ToggleControl } from '@wordpress/components';\n\nexport const ColumnsVisibility = ({ columns = [], setHiddenColumns, hiddenColumns = [] }) => {\n    return (\n        <div className='columns-visibility'>\n            {columns.map((col, index) => {\n                const isHidden = hiddenColumns.includes(`column_${index}`);\n                return (\n                    <ToggleControl\n                        label={`Hide ${col}`}\n                        help={\n                            isHidden\n                                ? 'Hidden'\n                                : 'Visible'\n                        }\n                        checked={isHidden}\n                        onChange={checked => {\n                            if (checked) {\n                                setHiddenColumns(hiddenColumns.concat([`column_${index}`]));\n                                return;\n                            }\n                            \n                            setHiddenColumns(hiddenColumns.filter(col => col !== `column_${index}`));\n                        }}\n                    />\n                );\n            })}\n        </div>\n    )\n};","export const Error = () => {\n    return (\n        <p>Error</p>\n    );\n};","export const Loading = () => {\n    return (\n        <p>Loading</p>\n    );\n};","import './Table.scss';\n\nexport const Table = ({ data, hiddenColumns = [] }) => {\n    const { title, data: table } = data;\n\n    return (\n        <div>\n            <h4>{title}</h4>\n            <table>\n                <thead>\n                    <tr>\n                        {table.headers\n                        .filter((col, index) => ! hiddenColumns.includes(`column_${index}`))\n                        .map(\n                            (col) => {\n                                return (\n                                    <th>{col}</th>\n                                );\n\n                            }     \n                        )}\n                    </tr>\n                </thead>\n                <tbody>\n                    {Object.values(table.rows).map((row) => {\n                        return (\n                            <tr>\n                                {Object.values(row)\n                                .filter((col, index) => ! hiddenColumns.includes(`column_${index}`))\n                                .map((col) => {\n                                    return <td>{col}</td>\n                                })}\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        </div>\n    );\n};","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\nimport { useBlockProps } from '@wordpress/block-editor'\nimport { Block } from './components/Block/Block';\nimport { Table } from './components/Table/Table';\n \nregisterBlockType( 'am-apiplugin/am-apiblock', {\n    edit: ({ attributes, setAttributes }) => (\n        <div { ...useBlockProps() } >\n            <Block\n                attributes={attributes} \n                setAttributes={setAttributes} \n            />\n        </div>\n    ),\n    save: ({ attributes }) => {\n        const { data, hiddenColumns } = attributes;\n        return (\n            <div { ...useBlockProps.save() } >\n                <Table data={data} hiddenColumns={hiddenColumns} />\n            </div>\n        );\n    },\n} );"],"names":["InspectorControls","ColumnsVisibility","Table","Error","Loading","Block","attributes","setAttributes","adminVars","error","data","hiddenColumns","setHiddenColumns","renderBlock","headers","jQuery","post","url","action","wpnonce","nonce","success","errorMessage","ToggleControl","columns","map","col","index","isHidden","includes","checked","concat","filter","title","table","Object","values","rows","row","registerBlockType","useBlockProps","edit","save"],"sourceRoot":""}